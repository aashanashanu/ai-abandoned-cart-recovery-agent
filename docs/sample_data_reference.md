# Sample Data Reference

This document provides a comprehensive reference to all sample data generated by `scripts/seed_sample_data.py` for testing the abandoned cart recovery agent.

## Customer Profiles

### Customer Segments Created

| Customer ID | Name | Email | Phone | Segment | Risk Level | Loyalty |
|--------------|-------|--------|--------|-----------|----------|
| cust_001 | Alex Johnson | alex@example.com | +155555501 | vip | premium |
| cust_002 | Jamie Smith | jamie@example.com | +155555502 | standard | regular |
| cust_003 | Sam Davis | sam@example.com | +155555503 | high_fraud_risk | regular |
| cust_004 | Taylor Wilson | taylor@example.com | +155555504 | standard | regular |
| cust_005 | Maria Garcia | maria@example.com | +4479123456 | standard | regular |

### Segment Characteristics

- **VIP (cust_001)**: High-value, loyal customer, premium support
- **Standard (cust_002, cust_004, cust_005)**: Regular customers, standard treatment
- **High Fraud Risk (cust_003)**: Flagged for additional verification

## Cart Events

### Abandonment Scenarios

| Cart ID | Customer | Event Type | Timestamp | Cart Value | Items | Item Count | Device |
|----------|-----------|--------------|------------|--------|--------|------------|
| cart_1001 | cust_001 | cart_abandoned | 85 min ago | $229.00 | Jacket, Shoes, Hat | 3 | mobile |
| cart_2002 | cust_002 | cart_abandoned | 80 min ago | $24.00 | Socks | 1 | desktop |
| cart_3003 | cust_004 | cart_abandoned | 200 min ago | $410.00 | Jacket, Shirt, Pants, Shoes | 4 | desktop |
| cart_4004 | cust_003 | cart_abandoned | 70 min ago | $44.00 | Hat | 1 | mobile |
| cart_5005 | cust_005 | cart_abandoned | 195 min ago | $18.00 | Bottle | 1 | desktop |

### Event Types

- **cart_abandoned**: Cart left inactive for extended period
- **cart_updated**: Items added/removed from cart
- **checkout_started**: User began checkout process

## Checkout Events

### Checkout Attempts

| Checkout ID | Cart ID | Customer | Step | Status | Shipping | Tax | Total | Timestamp | Issues |
|-------------|----------|-----------|--------|-----------|-----|-------|-----------|---------|
| chk_9001 | cart_1001 | cust_001 | payment_failed | started | $7.00 | $18.40 | $254.40 | 78 min ago | Payment declined |
| chk_9002 | cart_2002 | cust_002 | shipping_failed | started | $6.00 | $2.40 | $32.40 | 46 min ago | Shipping cost issue |
| chk_9003 | cart_4004 | cust_003 | payment_failed | started | $5.00 | $4.40 | $53.40 | 68 min ago | Payment declined |
| chk_9004 | cart_5005 | cust_005 | shipping_failed | started | $12.00 | $1.80 | $31.80 | 195 min ago | Shipping cost issue |

### Checkout Steps

1. **customer_info**: Customer details entry
2. **shipping_info**: Shipping address and method
3. **payment_info**: Payment details entry
4. **completed**: Successful checkout
5. **abandoned**: User left checkout process
6. **payment_failed**: Payment declined
7. **shipping_failed**: Shipping cost issue

## Payment Logs

### Payment Transactions

| Payment ID | Checkout ID | Status | Amount | Method | Error Code |
|-------------|------------|--------|--------|-----------|
| pay_7001 | chk_9001 | failed | $899.99 | credit_card | declined_insufficient_funds |
| pay_7002 | chk_9003 | completed | $1299.99 | credit_card | - |
| pay_7003 | chk_9004 | failed | $199.99 | paypal | payment_declined |

### Payment Methods

- **credit_card**: Standard card processing
- **paypal**: PayPal integration
- **apple_pay**: Apple Pay service

### Common Failure Codes

- **declined_insufficient_funds**: Insufficient account balance
- **payment_declined**: General payment decline
- **processing_error**: Payment gateway issues

## Session Metrics

### User Behavior Data

| Session ID | Customer | Route | Duration | Page Views | Device Type |
|-------------|-----------|--------|-------------|--------------|
| sess_aaa | cust_001 | /checkout/payment | 78 min | 12 | mobile |
| sess_bbb | cust_002 | /product/headphones | 46 min | 8 | desktop |
| sess_ccc | cust_004 | /checkout/shipping | 200 min | 15 | mobile |
| sess_ddd | cust_003 | /product/laptop | 94 min | 20 | desktop |
| sess_eee | cust_005 | /product/watch | 195 min | 4 | desktop |

### Behavioral Patterns

- **High page views**: Indicates user confusion or indecision
- **Long duration**: Suggests performance issues or comparison shopping
- **Mobile usage**: Quick checkout attempts, possible abandonment
- **Desktop usage**: Standard browsing behavior

## Recovery History

### Recovery Outcomes

| Recovery ID | Cart ID | Customer | Segment | Action Type | Status | Revenue | Date |
|-------------|----------|-----------|----------|----------|---------|--------|
| rec_001 | cart_hist_001 | cust_001 | vip | payment_retry | recovered | $899.99 | 14 days ago |
| rec_002 | cart_hist_002 | cust_002 | standard | free_shipping | recovered | $299.99 | 60 days ago |
| rec_003 | cart_hist_003 | cust_004 | high_fraud_risk | reminder | recovered | $1299.99 | 21 days ago |
| rec_004 | cart_hist_004 | cust_003 | standard | reminder | recovered | $599.99 | 35 days ago |
| rec_005 | cart_hist_005 | cust_002 | standard | discount | not_recovered | $0.00 | 40 days ago |
| rec_006 | cart_hist_006 | cust_005 | standard | reminder | recovered | $199.99 | 10 days ago |

### Recovery Actions

- **payment_retry**: Attempt payment with alternative method
- **free_shipping**: Offer free shipping incentive
- **reminder**: Send gentle reminder notification
- **discount**: Provide discount coupon
- **blocked**: No action due to fraud risk

### Success Rates by Action

| Action Type | Success Rate | Avg Revenue |
|-------------|--------------|--------------|
| payment_retry | 85% | $899.99 |
| free_shipping | 65% | $299.99 |
| reminder | 40% | $599.99 |
| discount | 25% | $0.00 |
| blocked | 0% | $0.00 |

## Test Scenarios

### 1. VIP Customer Payment Failure
- **Customer**: cust_001 (Alex Johnson, VIP)
- **Cart**: cart_1001 ($229.00, 3 items)
- **Checkout**: Total $254.40 (Cart $229.00 + Shipping $7.00 + Tax $18.40)
- **Issue**: Payment declined at checkout
- **Recovery**: payment_retry (VIP gets retry for payment issues)
- **Expected**: High recovery rate

### 2. Standard Customer Shipping Cost
- **Customer**: cust_002 (Jamie Smith, Standard)
- **Cart**: cart_2002 ($24.00, 1 item)
- **Checkout**: Total $32.40 (Cart $24.00 + Shipping $6.00 + Tax $2.40)
- **Issue**: High shipping cost causing abandonment
- **Recovery**: free_shipping (cost-effective for standard)
- **Expected**: Medium recovery rate

### 3. Standard Customer High Value
- **Customer**: cust_004 (Taylor Wilson, Standard)
- **Cart**: cart_3003 ($410.00, 4 items > 300 threshold)
- **Issue**: Cart abandonment with high item count
- **Recovery**: discount (Standard gets discount for high value)
- **Expected**: Medium recovery rate

### 4. High Fraud Risk Payment Failure
- **Customer**: cust_003 (Sam Davis, High Fraud Risk)
- **Cart**: cart_4004 ($44.00, 1 item)
- **Checkout**: Total $53.40 (Cart $44.00 + Shipping $5.00 + Tax $4.40)
- **Issue**: Payment failure with fraud indicators
- **Recovery**: blocked (fraud guardrail applied)
- **Expected**: No recovery action (safety first)

### 5. Standard Customer Shipping Issues
- **Customer**: cust_005 (Maria Garcia, Standard)
- **Cart**: cart_5005 ($18.00, 1 item)
- **Checkout**: Total $31.80 (Cart $18.00 + Shipping $12.00 + Tax $1.80)
- **Issue**: Shipping cost causing abandonment
- **Recovery**: free_shipping (Standard gets shipping incentive)
- **Expected**: Medium recovery rate

## Data Relationships

### Customer Journey Flow

```
Customer Profile → Cart Events → Checkout Events → Payment Logs
      ↓                ↓                ↓                ↓
   Segment          Cart Activity      Checkout Process    Transaction Results
   Loyalty          abandonment         Failure Analysis      Success/Failure
   Risk Level        timing             Step-by-Step        Method & Codes
```

### Recovery Decision Logic

```
Cart Abandonment → Diagnosis → Action Selection → Execution → Learning
      ↓              ↓                ↓              ↓          ↓
   Time Elapsed    Root Cause       Customer Type      Recovery Method   Outcome
   Cart Value      Signals         Segment          Channel/Type     Status
```

## Usage for Testing

### Verification Queries

```bash
# Count all documents by index
GET /_cat/indices?format=json

# Verify customer segments
GET customer_profiles/_search?size=0&aggs=segments:terms:field:segment

# Check cart abandonment patterns
GET cart_events/_search?size=0&aggs=abandonment:terms:field:event_type

# Analyze recovery success rates
GET recovery_history/_search?size=0&aggs=success_by_action:terms:field:action.type
```

### Test Data Validation

```bash
# Run seed script to populate data
python scripts/seed_sample_data.py

# Verify data was created
GET recovery_history/_count
GET cart_events/_count
GET customer_profiles/_count
```

This reference provides complete visibility into the test data structure for effective agent testing and validation.
